---
/**
 * CIF Directory: add/maintain your entries in the `entries` array below.
 * TIP: CIF links are built with BASE_URL so it works locally and on GitHub Pages.
 */
const BASE = import.meta.env.BASE_URL || '/';

type Entry = {
  datablock: string;
  repo: 'CCDC' | 'ICSD' | 'Other';
  accession: string;
  paperTitle?: string;
  doi?: string;              // e.g., "10.1021/jacs.XXXX"
  paperUrl?: string;         // full URL if not using DOI
  cifs: { file: string; label?: string }[]; // files under /public/assets/cifs/
};

// üîß EXAMPLES ‚Äî replace with your real data
const entries: Entry[] = [
  {
    datablock: 'Cm_POM_001',
    repo: 'CCDC',
    accession: '2233445',
    paperTitle: 'Counterion-modulated luminescence in curium polyoxometalates',
    doi: '10.1234/abcde.2025.001',
    cifs: [
      { file: 'Cm_POM_001.cif', label: 'Primary' },
      { file: 'Cm_POM_001_shelx.cif', label: 'Refined' },
    ],
  },
  {
    datablock: 'Eu_POM_Cs_02',
    repo: 'ICSD',
    accession: '198765',
    paperTitle: 'Lanthanide‚ÄìPOM emission tuning via Cs‚Å∫ binding',
    paperUrl: 'https://publisher.example.com/article/lanthanide-pom-cs',
    cifs: [{ file: 'Eu_POM_Cs_02.cif' }],
  },
];
---

<style>
  /* Minimal polish so it fits your theme */
  .cif-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }
  .cif-table th, .cif-table td {
    padding: .75rem 1rem;
    vertical-align: top;
  }
  .cif-table thead th {
    text-align: left;
    font-weight: 600;
    border-bottom: 1px solid rgba(0,0,0,.1);
  }
  .cif-table tbody tr + tr td {
    border-top: 1px solid rgba(0,0,0,.06);
  }
  .badge {
    display: inline-block;
    padding: .15rem .5rem;
    border-radius: 999px;
    font-size: .75rem;
    line-height: 1;
    border: 1px solid rgba(0,0,0,.15);
  }
  .links a {
    text-decoration: none;
    border-bottom: 1px dashed rgba(0,0,0,.25);
  }
  .links a:hover {
    border-bottom-style: solid;
  }
</style>

<h1 class="text-2xl font-semibold mb-4">CIF Directory</h1>
<p class="text-gray-600 mb-6">
  Datablock identifiers, repository accessions, links to papers, and downloadable CIF files.
</p>

<div class="overflow-x-auto">
  <table class="cif-table">
    <thead>
      <tr>
        <th>Datablock</th>
        <th>Repository</th>
        <th>Paper</th>
        <th>CIF Files</th>
      </tr>
    </thead>
    <tbody>
      {entries.map((e) => (
        <tr>
          <td>
            <strong>{e.datablock}</strong>
          </td>

          <td>
            <div class="flex items-center gap-2">
              <span class="badge">{e.repo}</span>
              <span class="text-gray-600">{e.accession}</span>
            </div>
          </td>

          <td class="links">
            {e.paperTitle && <div>{e.paperTitle}</div>}
            {e.doi
              ? <a href={`https://doi.org/${e.doi}`} target="_blank" rel="noopener">DOI: {e.doi}</a>
              : e.paperUrl
                ? <a href={e.paperUrl} target="_blank" rel="noopener">View paper</a>
                : <span class="text-gray-500">‚Äî</span>
            }
          </td>

          <td class="links">
            <ul class="m-0 p-0 list-none">
              {e.cifs.map((c) => {
                const href = `${BASE}assets/cifs/${c.file}`;
                return (
                  <li class="mb-1">
                    <a href={href} download>
                      {c.label ? `${c.label} ‚Äî ` : ''}{c.file}
                    </a>
                  </li>
                );
              })}
            </ul>
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>